<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI„ÇíÊ¥ªÁî®„Åó„Åü„ÉÅ„É£„ÉÉ„Éà„Éú„ÉÉ„Éà„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥">
    <meta name="theme-color" content="#ffffff">
    <title>ChatBot</title>
    <link rel="icon" href="icon/ChatBot.ico?v=2" type="image/png">
    <!-- CSS „Éï„Ç°„Ç§„É´ -->
    <link rel="stylesheet" href="css/base/variables.css">
    <link rel="stylesheet" href="css/base/base.css">
    <link rel="stylesheet" href="css/layouts/layout.css">
    <!-- Components CSS -->
    <link rel="stylesheet" href="css/components/buttons/buttons.css">
    <link rel="stylesheet" href="css/components/chat/chat-category.css">
    <link rel="stylesheet" href="css/components/forms/forms.css">
    <link rel="stylesheet" href="css/components/forms/claude-websearch.css">
    <link rel="stylesheet" href="css/components/modals/modals.css">
    <link rel="stylesheet" href="css/components/settings/settings-menu.css">
    <link rel="stylesheet" href="css/components/prompt/prompt-manager.css">
    <link rel="stylesheet" href="css/components/prompt/prompt-suggestions.css">
    <link rel="stylesheet" href="css/components/code/code-execution.css">
    <link rel="stylesheet" href="css/components/code/monaco-editor.css">
    <link rel="stylesheet" href="css/components/animations/typing.css">
    <link rel="stylesheet" href="css/components/animations/system-messages.css">
    <link rel="stylesheet" href="css/components/file-preview/pdf-preview.css">
    <link rel="stylesheet" href="css/components/file-preview/office-preview.css">
    <link rel="stylesheet" href="css/components/file-preview/text-preview.css">
    <link rel="stylesheet" href="css/components/notifications/notifications.css">
    <link rel="stylesheet" href="css/components/chat/chat.css">
    <link rel="stylesheet" href="css/components/chat/markdown.css">
    <link rel="stylesheet" href="css/components/rag/knowledge-base.css">
    <link rel="stylesheet" href="css/components/rag/confluence-settings.css">
    <link rel="stylesheet" href="css/components/artifact/artifact-panel.css">
    <link rel="stylesheet" href="css/tools.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer">
    
    <!-- Prism.js „Çπ„Çø„Ç§„É´„Ç∑„Éº„Éà -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
    
    <!-- „Éû„Éº„ÇØ„ÉÄ„Ç¶„É≥„É©„Ç§„Éñ„É©„É™„Å®Prism.js„Ç≥„Ç¢„Çí‰∫ãÂâçË™≠„ÅøËæº„Åø -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <!-- PDF.js „É©„Ç§„Éñ„É©„É™ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <!-- SheetJS „É©„Ç§„Éñ„É©„É™ (ExcelËß£ÊûêÁî®) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- JSZip „É©„Ç§„Éñ„É©„É™ (PPTX, DOCXËß£ÊûêÁî®) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    
    <!-- „Ç∑„É≥„Éó„É´„Ç≥„Éº„Éâ„Ç®„Éá„Ç£„Çø„Çπ„Çø„Ç§„É´ -->
    <style>
        .simple-editor-fallback textarea {
            width: 100%;
            height: 300px;
            background-color: #1e1e1e;
            color: #d4d4d4;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 14px;
            padding: 10px;
            border: 1px solid #444;
            resize: none;
        }
    </style>
    
    <!-- Prism.js „É©„É≥„Çø„Ç§„É†Ë™≠„ÅøËæº„ÅøÁî®„Çπ„ÇØ„É™„Éó„Éà -->
    <script>
        // DOMË™≠„ÅøËæº„ÅøÂÆå‰∫ÜÂæå„Å´ÂÆüË°å„Åï„Çå„ÇãPrismÈñ¢ÈÄ£„ÅÆÂàùÊúüÂåñ„ÅØmain.js„Å´ÁßªÂãï„Åó„Åæ„Åó„Åü
        // „Åì„Åì„Åß„ÅØPrism.js„ÅÆ„ÉØ„Éº„Ç´„ÉºË®≠ÂÆö„ÅÆ„ÅøË°å„ÅÑ„Åæ„Åô
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.7.0/mammoth.browser.min.js"></script>

    <!-- Transformers.js („É≠„Éº„Ç´„É´Âüã„ÇÅËæº„ÅøÁî®) -->
    <script type="module">
        import { pipeline, env } from 'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3';
        // „É≠„Éº„Ç´„É´„É¢„Éá„É´„ÅØ‰ΩøÁî®„Åó„Å™„ÅÑÔºàCDN„Åã„Çâ„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÔºâ
        env.allowLocalModels = false;
        // „Ç∞„É≠„Éº„Éê„É´„Å´ÂÖ¨Èñã
        window.TransformersJS = { pipeline, env };
        console.log('‚úÖ Transformers.js loaded');
    </script>
</head>
<body>
    <div class="app-container">
        <!-- „Çµ„Ç§„Éâ„Éê„Éº -->
        <div class="sidebar">
            <div class="sidebar-header">
                <button id="newChatButton" class="new-chat-button cyber-style">
                    <i class="fas fa-plus"></i> Êñ∞„Åó„ÅÑ„ÉÅ„É£„ÉÉ„Éà
                </button>
            </div>
            <div class="chat-history" id="chatHistory">
                <!-- „ÉÅ„É£„ÉÉ„ÉàÂ±•Ê≠¥„ÅØJS„ÅßÂãïÁöÑ„Å´ËøΩÂä† -->
            </div>
            <div class="sidebar-footer">
                <button id="clearHistoryButton" class="clear-history-button cyber-style" title="Â±•Ê≠¥„Çí‰∏ÄÊã¨„ÇØ„É™„Ç¢">
                    <i class="fas fa-trash"></i>
                </button>
                <div class="settings-dropdown">
                    <button id="settingsButton" class="settings-button cyber-style" title="Ë®≠ÂÆö">
                        <i class="fas fa-cog"></i>
                    </button>
                    <div id="settingsMenu" class="settings-menu">
                        <button id="openSystemPromptSettings">„Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„ÉàË®≠ÂÆö</button>
                        <button id="openPromptManager">„É¶„Éº„Ç∂„Éº„Éó„É≠„É≥„Éó„ÉàÁÆ°ÁêÜ</button>
                        <button id="openKnowledgeBase">„Éä„É¨„ÉÉ„Ç∏„Éô„Éº„Çπ (RAG)</button>
                        <button id="openApiSettings">APIË®≠ÂÆö</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- „É°„Ç§„É≥„ÉÅ„É£„ÉÉ„Éà„Ç®„É™„Ç¢ -->
        <div class="chat-container">
            <div class="chat-header">
                <h1>ChatBot</h1>
                <div class="model-selector">
                    <select id="modelSelect">
                        <!-- „É¢„Éá„É´„ÅØconfig.js„ÅÆË®≠ÂÆö„Åã„ÇâJavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„Åæ„Åô -->
                    </select>
                </div>
            </div>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-input-container" id="chatInputContainer">
                <div class="input-wrapper">
                    <div class="prompt-suggestions" id="promptSuggestions">
                        <!-- „Éó„É≠„É≥„Éó„ÉàÂÄôË£ú„ÅØJS„ÅßÂãïÁöÑ„Å´ËøΩÂä† -->
                    </div>
                    <div class="main-input-area">
                        <textarea id="userInput" placeholder="„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ..." rows="1"></textarea>
                        <div class="input-actions">
                            <button id="webSearchToggle" class="toggle-button" title="WebÊ§úÁ¥¢Ê©üËÉΩ„ÅÆON/OFFÂàáÊõø">
                                <span>üåê</span>
                            </button>
                            <label class="file-upload-label" title="„Éï„Ç°„Ç§„É´„ÇíÊ∑ª‰ªò„Åô„Çã">
                                <input type="file" id="fileInput" multiple accept=".jpg,.jpeg,.png,.gif,.webp,.svg,.txt,.md,.csv,.pdf,.js,.html,.css,.json">
                                <i class="fas fa-paperclip"></i>
                            </label>
                        </div>
                    </div>
                </div>
                <button id="sendButton" class="cyber-style">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>

        <!-- „Ç¢„Éº„ÉÜ„Ç£„Éï„Ç°„ÇØ„Éà„Éë„Éç„É´ -->
        <div id="artifactPanel" class="artifact-panel">
            <div class="artifact-resize-handle" id="artifactResizeHandle"></div>
            <div class="artifact-panel-header">
                <span class="artifact-title" id="artifactTitleText">„Ç¢„Éº„ÉÜ„Ç£„Éï„Ç°„ÇØ„Éà</span>
                <div class="artifact-tabs">
                    <button id="artifactPreviewTab" class="artifact-tab active">„Éó„É¨„Éì„É•„Éº</button>
                    <button id="artifactCodeTab" class="artifact-tab">„Ç≥„Éº„Éâ</button>
                </div>
                <div class="artifact-actions">
                    <button id="artifactRunBtn" class="artifact-action-btn" title="ÂÆüË°å">
                        <i class="fas fa-play"></i>
                    </button>
                    <button id="artifactEditBtn" class="artifact-action-btn" title="Á∑®ÈõÜ">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button id="artifactDownloadBtn" class="artifact-action-btn" title="„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ">
                        <i class="fas fa-download"></i>
                    </button>
                    <button id="artifactCloseBtn" class="artifact-action-btn close-btn" title="Èñâ„Åò„Çã">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="artifact-panel-content">
                <div id="artifactPreview" class="artifact-preview-container">
                    <div class="artifact-empty-state">
                        <i class="fas fa-file-code"></i>
                        <p>AI„Åå„Ç≥„Éº„Éâ„ÇíÁîüÊàê„Åô„Çã„Å®„ÄÅ„Åì„Åì„Å´„Éó„É¨„Éì„É•„Éº„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô</p>
                    </div>
                </div>
                <div id="artifactCode" class="artifact-code-container hidden"></div>
            </div>
            <div class="artifact-panel-footer">
                <div class="artifact-type-badge" id="artifactTypeBadge">-</div>
                <div class="artifact-history" id="artifactHistory"></div>
            </div>
        </div>
    </div>

    <!-- „É¢„Éº„ÉÄ„É´ -->
    <!-- API„Ç≠„ÉºË®≠ÂÆö„É¢„Éº„ÉÄ„É´ -->
    <div id="apiKeyModal" class="modal">
        <div class="modal-content">
            <h2>APIË®≠ÂÆö</h2>
            <div class="form-group">
                <label>APIÁ®ÆÈ°û:</label>
                <div class="radio-group">
                    <input type="radio" id="openaiSystemRadio" name="apiSystem" value="openai" checked>
                    <label for="openaiSystemRadio">OpenAIÁ≥ª</label>
                    <input type="radio" id="geminiSystemRadio" name="apiSystem" value="gemini">
                    <label for="geminiSystemRadio">Google Gemini</label>
                    <input type="radio" id="claudeSystemRadio" name="apiSystem" value="claude">
                    <label for="claudeSystemRadio">Anthropic Claude</label>
                </div>
            </div>
            
            <!-- OpenAIÁ≥ª„ÅÆË®≠ÂÆö -->
            <div id="openaiSystemSettings">
                <div class="form-group">
                    <label>‰ΩøÁî®„Åô„Çã„Çµ„Éº„Éì„Çπ:</label>
                    <div class="radio-group">
                        <input type="radio" id="openaiRadio" name="openaiType" value="openai" checked>
                        <label for="openaiRadio">OpenAI</label>
                        <input type="radio" id="azureRadio" name="openaiType" value="azure">
                        <label for="azureRadio">Azure OpenAI</label>
                    </div>
                </div>
                
                <div id="openaiSettings" class="form-group">
                    <label for="apiKeyInput">OpenAI API„Ç≠„Éº:</label>
                    <input type="password" id="apiKeyInput" placeholder="sk-...">
                </div>
                
                <div id="azureSettings" class="hidden">
                    <div class="form-group">
                        <label for="azureApiKeyInput">Azure API„Ç≠„Éº:</label>
                        <input type="password" id="azureApiKeyInput" placeholder="Azure API„Ç≠„Éº„ÇíÂÖ•Âäõ">
                    </div>
                    <div class="azure-model-endpoints">
                        <div class="form-group">
                            <label for="azureEndpointGpt4oMini">gpt-4o-mini „Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàURL:</label>
                            <input type="text" id="azureEndpointGpt4oMini" placeholder="https://your-resource.openai.azure.com/openai/deployments/your-deployment/chat/completions?api-version=2023-05-15">
                        </div>
                        <div class="form-group">
                            <label for="azureEndpointGpt4o">gpt-4o „Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàURL:</label>
                            <input type="text" id="azureEndpointGpt4o" placeholder="https://your-resource.openai.azure.com/openai/deployments/your-deployment/chat/completions?api-version=2023-05-15">
                        </div>
                        <div class="form-group">
                            <label for="azureEndpointGpt5Mini">gpt-5-mini „Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàURL:</label>
                            <input type="text" id="azureEndpointGpt5Mini" placeholder="https://your-resource.openai.azure.com/openai/deployments/your-deployment/chat/completions?api-version=2023-05-15">
                        </div>
                        <div class="form-group">
                            <label for="azureEndpointGpt5">gpt-5 „Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàURL:</label>
                            <input type="text" id="azureEndpointGpt5" placeholder="https://your-resource.openai.azure.com/openai/deployments/your-deployment/chat/completions?api-version=2023-05-15">
                        </div>
                        <div class="form-group">
                            <label for="azureEndpointO1Mini">o1-mini „Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàURL:</label>
                            <input type="text" id="azureEndpointO1Mini" placeholder="https://your-resource.openai.azure.com/openai/deployments/your-deployment/chat/completions?api-version=2023-05-15">
                        </div>
                        <div class="form-group">
                            <label for="azureEndpointO1">o1 „Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàURL:</label>
                            <input type="text" id="azureEndpointO1" placeholder="https://your-resource.openai.azure.com/openai/deployments/your-deployment/chat/completions?api-version=2023-05-15">
                        </div>
                        <div class="form-group" style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-color);">
                            <label for="azureEndpointEmbedding">text-embedding-3-large „Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàURLÔºàRAGÁî®Ôºâ:</label>
                            <input type="text" id="azureEndpointEmbedding" placeholder="https://your-resource.openai.azure.com/openai/deployments/text-embedding-3-large/embeddings?api-version=2023-05-15">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- GeminiÁ≥ª„ÅÆË®≠ÂÆö -->
            <div id="geminiSystemSettings" class="hidden">
                <div class="form-group">
                    <label for="geminiApiKeyInput">Gemini API„Ç≠„Éº:</label>
                    <input type="password" id="geminiApiKeyInput" placeholder="Google Gemini API„Ç≠„Éº„ÇíÂÖ•Âäõ">
                </div>
            </div>
            
            <!-- ClaudeÁ≥ª„ÅÆË®≠ÂÆö -->
            <div id="claudeSystemSettings" class="hidden">
                <div class="form-group">
                    <label for="claudeApiKeyInput">Claude API„Ç≠„Éº:</label>
                    <input type="password" id="claudeApiKeyInput" placeholder="Anthropic Claude API„Ç≠„Éº„ÇíÂÖ•Âäõ">
                </div>
            </div>
            
            <div class="form-group">
                <label class="web-search-info">
                    <h4>üåê WebÊ§úÁ¥¢Ê©üËÉΩ„Å´„Å§„ÅÑ„Å¶</h4>
                    <div class="web-search-details">
                        ‚Ä¢ <strong>GPT-5„Ç∑„É™„Éº„Ç∫</strong>: Responses APIÂÜÖËîµÊ§úÁ¥¢<br>
                        ‚Ä¢ <strong>Claude 4Á≥ª„Éª3.5„Ç∑„É™„Éº„Ç∫</strong>: WebÊ§úÁ¥¢„ÉÑ„Éº„É´„Å´„Çà„ÇãÊúÄÊñ∞ÊÉÖÂ†±ÂèñÂæó<br>
                        ‚Ä¢ <strong>Gemini„Ç∑„É™„Éº„Ç∫</strong>: WebÊ§úÁ¥¢Ê©üËÉΩ„ÅØÂà©Áî®„Åß„Åç„Åæ„Åõ„Çì<br>
                        ‚Ä¢ <strong>„Åù„ÅÆ‰ªñ„ÅÆ„É¢„Éá„É´</strong>: WebÊ§úÁ¥¢Ê©üËÉΩ„ÅØÂà©Áî®„Åß„Åç„Åæ„Åõ„Çì<br>
                        <br>
                        <em>WebÊ§úÁ¥¢„ÅÆÊúâÂäπ/ÁÑ°Âäπ„ÅØ„ÄÅ„ÉÅ„É£„ÉÉ„ÉàÁîªÈù¢„ÅÆüåê„Éú„Çø„É≥„ÅßÂàá„ÇäÊõø„Åà„Åß„Åç„Åæ„Åô„ÄÇ</em>
                    </div>
                </label>
            </div>
            
            <div class="modal-buttons">
                <button id="saveApiKey" class="primary-button">‰øùÂ≠ò</button>
                <button id="cancelApiKey" class="primary-button">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>

    <!-- „ÉÅ„É£„ÉÉ„ÉàÂêçÂ§âÊõ¥„É¢„Éº„ÉÄ„É´ -->
    <div id="renameChatModal" class="modal">
        <div class="modal-content">
            <h2>„ÉÅ„É£„ÉÉ„ÉàÂêç„ÇíÂ§âÊõ¥</h2>
            <div class="form-group">
                <label for="chatTitleInput">„Çø„Ç§„Éà„É´:</label>
                <input type="text" id="chatTitleInput" placeholder="„ÉÅ„É£„ÉÉ„Éà„Çø„Ç§„Éà„É´">
            </div>
            <div class="modal-buttons">
                <button id="saveRenameChat" class="primary-button">‰øùÂ≠ò</button>
                <button id="cancelRenameChat" class="primary-button">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>

    <!-- „Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„ÉàË®≠ÂÆö„É¢„Éº„ÉÄ„É´ -->
    <div id="systemPromptModal" class="modal">
        <div class="modal-content">
            <h2>„Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„ÉàË®≠ÂÆö</h2>
            <div class="system-prompt-container">
                <div class="system-prompt-sidebar">
                    <h3 class="system-prompt-list-title">„Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„Éà‰∏ÄË¶ß</h3>
                    <div id="systemPromptListArea" class="system-prompt-list-area">
                        <!-- „Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„Éà‰∏ÄË¶ß„ÅØJS„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
                    </div>
                </div>
                <div class="system-prompt-main">
                    <div class="form-group">
                        <div class="form-group">
                            <label for="newTemplateCategory">„Ç´„ÉÜ„Ç¥„É™:</label>
                            <input type="text" id="newTemplateCategory" placeholder="„Ç´„ÉÜ„Ç¥„É™Âêç„ÇíÂÖ•Âäõ">
                        </div>
                        <div class="form-group">
                            <label for="newSystemPromptName">„Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„ÉàÂêç:</label>
                            <input type="text" id="newSystemPromptName" placeholder="„Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„ÉàÂêç">
                        </div>
                        <div class="form-group">
                            <label for="systemPromptInput">„Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„Éà:</label>
                            <textarea id="systemPromptInput" rows="15" placeholder="„Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„Éà„ÇíÂÖ•Âäõ..."></textarea>
                        </div>
                        <div style="margin-top: 15px;">
                            <button id="saveNewSystemPrompt" class="secondary-button">„Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„Éà„Å®„Åó„Å¶‰øùÂ≠ò</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button id="saveSystemPrompt" class="primary-button">‰øùÂ≠ò</button>
                <button id="cancelSystemPrompt" class="primary-button">„Ç≠„É£„É≥„Çª„É´</button>
                <button id="switchToPromptManager" class="primary-button">„É¶„Éº„Ç∂„Éº„Éó„É≠„É≥„Éó„ÉàÁÆ°ÁêÜ„Å∏</button>
            </div>
        </div>
    </div>

    <!-- „É¶„Éº„Ç∂„Éº„Éó„É≠„É≥„Éó„ÉàÁÆ°ÁêÜ„É¢„Éº„ÉÄ„É´ -->
    <div id="promptManagerModal" class="modal">
        <div class="modal-content prompt-manager-modal">
            <h2>„É¶„Éº„Ç∂„Éº„Éó„É≠„É≥„Éó„ÉàÁÆ°ÁêÜ</h2>
            <div class="prompt-manager-container">
                <div class="prompt-manager-header">
                    <div class="prompt-filter-buttons">
                        <button id="showAllPrompts" class="filter-button active">„Åô„Åπ„Å¶</button>
                        <button id="showFavorites" class="filter-button">
                            <i class="fas fa-star"></i> „ÅäÊ∞ó„Å´ÂÖ•„Çä
                        </button>
                    </div>
                    <div class="prompt-sort-select">
                        <select id="promptSortSelect">
                            <option value="recent">ÊúÄËøëÊõ¥Êñ∞</option>
                            <option value="mostUsed">„Çà„Åè‰Ωø„ÅÜ</option>
                            <option value="name">ÂêçÂâçÈ†Ü</option>
                        </select>
                    </div>
                    <div class="prompt-search">
                        <input type="text" id="promptSearchInput" placeholder="„Éó„É≠„É≥„Éó„ÉàÊ§úÁ¥¢...">
                    </div>
                    <button id="addPromptButton" class="secondary-button">
                        <i class="fas fa-plus"></i> Êñ∞Ë¶è
                    </button>
                </div>
                <div id="promptsList" class="prompts-list">
                    <!-- „Éó„É≠„É≥„Éó„Éà‰∏ÄË¶ß„ÅØJS„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
                </div>
            </div>
            <div class="modal-buttons">
                <button id="closePromptManager" class="primary-button">Èñâ„Åò„Çã</button>
                <button id="switchToSystemPrompt" class="primary-button">„Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„ÉàË®≠ÂÆö„Å∏</button>
            </div>
        </div>
    </div>

    <!-- „É¶„Éº„Ç∂„Éº„Éó„É≠„É≥„Éó„ÉàÁ∑®ÈõÜ„É¢„Éº„ÉÄ„É´ -->
    <div id="promptEditModal" class="modal">
        <div class="modal-content">
            <h2 id="promptEditTitle">„Éó„É≠„É≥„Éó„ÉàÁ∑®ÈõÜ</h2>
            <div class="form-group">
                <label for="promptNameInput">ÂêçÂâç:</label>
                <input type="text" id="promptNameInput" placeholder="„Éó„É≠„É≥„Éó„ÉàÂêç">
            </div>
            <div class="form-group">
                <label for="promptTagsInput">„Çø„Ç∞ („Ç´„É≥„ÉûÂå∫Âàá„Çä):</label>
                <input type="text" id="promptTagsInput" placeholder="„Çø„Ç∞1, „Çø„Ç∞2, ...">
            </div>
            <div class="form-group">
                <label for="promptDescriptionInput">Ë™¨Êòé:</label>
                <textarea id="promptDescriptionInput" rows="2" placeholder="„Éó„É≠„É≥„Éó„Éà„ÅÆË™¨Êòé..."></textarea>
            </div>
            <div class="form-group">
                <label for="promptContentInput">„Éó„É≠„É≥„Éó„ÉàÂÜÖÂÆπ:</label>
                <textarea id="promptContentInput" rows="10" placeholder="„Éó„É≠„É≥„Éó„ÉàÂÜÖÂÆπ„ÇíÂÖ•Âäõ..."></textarea>
            </div>
            <div class="modal-buttons">
                <button id="savePromptEdit" class="primary-button">‰øùÂ≠ò</button>
                <button id="cancelPromptEdit" class="secondary-button">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>
    
    <!-- „Ç≥„Éº„Éâ„Ç®„Éá„Ç£„Çø„Éº„É¢„Éº„ÉÄ„É´ -->
    <div id="codeEditorModal" class="modal code-editor-modal">
        <div class="modal-content code-editor-content">
            <h2>„Ç≥„Éº„Éâ„Ç®„Éá„Ç£„Çø„Éº</h2>
            <div class="code-editor-container">
                <div class="editor-toolbar">
                    <div class="editor-language-select">
                        <label for="editorLanguageSelect">Ë®ÄË™û:</label>
                        <select id="editorLanguageSelect">
                            <option value="javascript">JavaScript</option>
                            <option value="html">HTML</option>
                            <option value="css">CSS</option>
                            <option value="python">Python</option>
                            <option value="java">Java</option>
                            <option value="cpp">C++</option>
                        </select>
                    </div>
                    <div class="editor-actions">
                        <button id="runCodeButton" class="editor-button run-button">
                            <i class="fas fa-play"></i> ÂÆüË°å
                        </button>
                    </div>
                </div>
                <!-- „Ç®„Éá„Ç£„Çø„ÇíÊòéÁ§∫ÁöÑ„Å´‰∏ä„Å´ÈÖçÁΩÆ -->
                <div id="monacoEditorContainer" class="monaco-editor-container"></div>
                
                <!-- ÂÆüË°åÁµêÊûú„Ç®„É™„Ç¢„Çí‰∏ã„Å´ÈÖçÁΩÆ -->
                <div id="codeExecutionPreview" class="code-execution-preview">
                    <h3>ÂÆüË°åÁµêÊûú</h3>
                    <div class="code-execution-result">
                        <div class="execution-info-bar">
                            <div class="execution-status">Ê∫ñÂÇôÂÆå‰∫Ü</div>
                            <div class="execution-time" id="executionTimeDisplay"><!-- „Åì„Åì„Å´ÂÆüË°åÊôÇÈñì„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô --></div>
                        </div>
                        <pre class="realtime-output"></pre>
                        <div class="html-result-container"></div>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button id="cancelCodeChanges" class="secondary-button">Èñâ„Åò„Çã</button>
            </div>
        </div>
    </div>

    <!-- RAG„Éä„É¨„ÉÉ„Ç∏„Éô„Éº„Çπ„É¢„Éº„ÉÄ„É´ -->
    <div id="knowledgeBaseModal" class="modal">
        <div class="modal-content knowledge-base-modal">
            <h2><i class="fas fa-book"></i> „Éä„É¨„ÉÉ„Ç∏„Éô„Éº„Çπ</h2>

            <!-- APIË≠¶Âëä -->
            <div id="kbApiWarning" class="kb-api-warning"></div>

            <!-- RAG„Éà„Ç∞„É´ -->
            <div class="kb-toggle-section">
                <label class="kb-toggle-label">
                    <i class="fas fa-brain"></i>
                    <span>RAG„ÇíÊúâÂäπ„Å´„Åô„Çã</span>
                </label>
                <div class="kb-toggle-switch">
                    <input type="checkbox" id="ragToggle">
                    <span class="kb-toggle-slider"></span>
                </div>
            </div>

            <!-- Áµ±Ë®àÊÉÖÂ†± -->
            <div id="kbStats" class="kb-stats-container">
                <!-- Áµ±Ë®àÊÉÖÂ†±„ÅØJS„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
            </div>

            <!-- „Éá„Éº„Çø„ÇΩ„Éº„Çπ„Çø„Éñ -->
            <div class="kb-datasource-tabs">
                <button id="kbFileTab" class="kb-tab active">
                    <i class="fas fa-file"></i> „Éï„Ç°„Ç§„É´
                </button>
                <button id="kbConfluenceTab" class="kb-tab">
                    <i class="fas fa-atlas"></i> Confluence
                </button>
            </div>

            <!-- „Éï„Ç°„Ç§„É´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <div id="kbFileSection" class="kb-section">
                <div class="kb-upload-section">
                    <div id="kbDropZone" class="kb-drop-zone">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>„Éï„Ç°„Ç§„É´„Çí„Éâ„É©„ÉÉ„Ç∞&„Éâ„É≠„ÉÉ„Éó</p>
                        <p class="kb-upload-hint">„Åæ„Åü„ÅØ</p>
                        <div class="kb-upload-buttons">
                            <button id="kbUploadBtn" class="kb-upload-btn">
                                <i class="fas fa-file"></i> „Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû
                            </button>
                            <button id="kbUploadFolderBtn" class="kb-upload-btn kb-upload-folder-btn">
                                <i class="fas fa-folder"></i> „Éï„Ç©„É´„ÉÄ„ÇíÈÅ∏Êäû
                            </button>
                        </div>
                        <input type="file" id="kbFileInput" class="kb-file-input" multiple
                               accept=".pdf,.txt,.md,.docx,.doc,.xlsx,.xls,.pptx,.ppt,.csv,.json,.js,.html,.css,.py,.java,.cpp,.c">
                        <input type="file" id="kbFolderInput" class="kb-file-input" webkitdirectory>
                    </div>
                </div>
            </div>

            <!-- Confluence„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <div id="kbConfluenceSection" class="kb-section hidden">
                <!-- ConfluenceË®≠ÂÆö„Éï„Ç©„Éº„É† -->
                <div id="confluenceSettingsForm" class="confluence-settings-form">
                    <div class="form-group">
                        <label for="confluenceBaseUrl">Confluence URL:</label>
                        <input type="text" id="confluenceBaseUrl" placeholder="https://confluence.example.com">
                    </div>

                    <div class="form-group">
                        <label>Ë™çË®ºÊñπÂºè:</label>
                        <div class="radio-group">
                            <label>
                                <input type="radio" id="authBasic" name="confluenceAuthType" value="basic" checked>
                                BasicË™çË®º
                            </label>
                            <label>
                                <input type="radio" id="authPat" name="confluenceAuthType" value="pat">
                                Personal Access Token
                            </label>
                        </div>
                    </div>

                    <!-- BasicË™çË®º„Éï„Ç£„Éº„É´„Éâ -->
                    <div id="basicAuthFields" class="auth-fields">
                        <div class="form-group">
                            <label for="confluenceUsername">„É¶„Éº„Ç∂„ÉºÂêç:</label>
                            <input type="text" id="confluenceUsername" placeholder="username">
                        </div>
                        <div class="form-group">
                            <label for="confluencePassword">„Éë„Çπ„ÉØ„Éº„Éâ:</label>
                            <input type="password" id="confluencePassword" placeholder="password">
                        </div>
                    </div>

                    <!-- PATË™çË®º„Éï„Ç£„Éº„É´„Éâ -->
                    <div id="patAuthFields" class="auth-fields hidden">
                        <div class="form-group">
                            <label for="confluenceToken">Personal Access Token:</label>
                            <input type="password" id="confluenceToken" placeholder="your-access-token">
                        </div>
                    </div>

                    <div class="confluence-settings-buttons">
                        <button id="testConfluenceConnection" class="secondary-button">
                            <i class="fas fa-plug"></i> Êé•Á∂ö„ÉÜ„Çπ„Éà
                        </button>
                        <button id="saveConfluenceSettings" class="primary-button">
                            <i class="fas fa-save"></i> Ë®≠ÂÆö„Çí‰øùÂ≠ò
                        </button>
                    </div>
                </div>

                <!-- „Çπ„Éö„Éº„ÇπÈÅ∏Êäû„Çª„ÇØ„Ç∑„Éß„É≥ÔºàË®≠ÂÆöÂÆå‰∫ÜÂæå„Å´Ë°®Á§∫Ôºâ -->
                <div id="confluenceSpaceSection" class="confluence-space-section hidden">
                    <div class="confluence-connection-status connected" id="confluenceConnectionStatus">
                        <i class="fas fa-check-circle"></i>
                        <span id="confluenceStatusText">Êé•Á∂öÊ∏à„Åø</span>
                    </div>
                    <div class="form-group">
                        <label for="confluenceSpaceSelect">„Çπ„Éö„Éº„Çπ„ÇíÈÅ∏Êäû:</label>
                        <select id="confluenceSpaceSelect">
                            <option value="">„Çπ„Éö„Éº„Çπ„ÇíÈÅ∏Êäû</option>
                        </select>
                    </div>

                    <!-- „Éö„Éº„Ç∏„ÉÑ„É™„Éº„Çª„ÇØ„Ç∑„Éß„É≥ -->
                    <div id="confluencePageTreeSection" class="confluence-page-tree-section hidden">
                        <div class="confluence-page-tree-header">
                            <span class="confluence-page-tree-title">
                                <i class="fas fa-sitemap"></i> „Éö„Éº„Ç∏ÈöéÂ±§
                            </span>
                            <div class="confluence-page-tree-actions">
                                <button id="selectAllPages" class="tree-action-btn" title="ÂÖ®ÈÅ∏Êäû">
                                    <i class="fas fa-check-double"></i>
                                </button>
                                <button id="deselectAllPages" class="tree-action-btn" title="ÂÖ®Ëß£Èô§">
                                    <i class="fas fa-times"></i>
                                </button>
                                <button id="collapseAllPages" class="tree-action-btn" title="ÂÖ®Êäò„Çä„Åü„Åü„Åø">
                                    <i class="fas fa-compress-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div id="confluencePageTree" class="confluence-page-tree">
                            <!-- „ÉÑ„É™„Éº„Éé„Éº„Éâ„ÅØJS„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
                        </div>
                        <div class="confluence-page-tree-footer">
                            <span id="selectedPageCount">0 „Éö„Éº„Ç∏ÈÅ∏Êäû‰∏≠</span>
                        </div>
                    </div>

                    <div class="confluence-space-buttons">
                        <button id="importConfluencePages" class="primary-button">
                            <i class="fas fa-download"></i> ÈÅ∏Êäû„Åó„Åü„Éö„Éº„Ç∏„Çí„Ç§„É≥„Éù„Éº„Éà
                        </button>
                        <button id="editConfluenceSettings" class="secondary-button">
                            <i class="fas fa-cog"></i> Ë®≠ÂÆö„ÇíÂ§âÊõ¥
                        </button>
                    </div>
                </div>
            </div>

            <!-- ÈÄ≤ÊçóË°®Á§∫ -->
            <div id="kbProgress" class="kb-progress-container">
                <div class="kb-progress-bar-wrapper">
                    <div id="kbProgressBar" class="kb-progress-bar"></div>
                </div>
                <div id="kbProgressText" class="kb-progress-text">Âá¶ÁêÜ‰∏≠...</div>
            </div>

            <!-- „Éâ„Ç≠„É•„É°„É≥„Éà‰∏ÄË¶ß -->
            <div class="kb-document-list-section">
                <div class="kb-document-list-header">
                    <h3>ÁôªÈå≤Ê∏à„Åø„Éâ„Ç≠„É•„É°„É≥„Éà</h3>
                    <button id="kbClearAllBtn" class="kb-clear-all-btn">ÂÖ®„Å¶ÂâäÈô§</button>
                </div>
                <div id="kbDocumentList" class="kb-document-list">
                    <!-- „Éâ„Ç≠„É•„É°„É≥„Éà‰∏ÄË¶ß„ÅØJS„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
                </div>
            </div>

            <!-- „Éï„ÉÉ„Çø„Éº -->
            <div class="kb-modal-footer">
                <button id="closeKnowledgeBaseModal" class="kb-close-btn">Èñâ„Åò„Çã</button>
            </div>
        </div>
    </div>

    <!-- JS„Éï„Ç°„Ç§„É´„ÇíË™≠„ÅøËæº„ÇÄ -->
    <!-- ÂÆüË°åÁí∞Â¢ÉÈñ¢ÈÄ£„ÅÆ„Éï„Ç°„Ç§„É´ -->
    <script src="js/lib/JSCPP.es5.min.js"></script>
    <script src="js/core/executors/languages/ExecutorBase.js"></script>
    <script src="js/core/executors/languages/JavaScriptExecutor.js"></script>
    <script src="js/core/executors/languages/HTMLExecutor.js"></script>
    <script src="js/core/executors/languages/PythonExecutor.js"></script>
    <script src="js/core/executors/languages/CPPExecutor.js"></script>
    <script src="js/core/executors/languages/TypeScriptExecutor.js"></script>
    <script src="js/core/executors/codeExecutor.js"></script>

    <!-- Core -->
    <script src="js/core/config.js"></script>
    <script src="js/core/keyboardShortcuts.js"></script>
    <script src="js/utils/cryptoHelper.js"></script>
    <script src="js/core/storage.js"></script>

    <!-- Core -->
    <script src="js/core/uiCache.js"></script>
    <script src="js/core/dragManager.js"></script>
    <script src="js/core/uiUtils.js"></script>
    <script src="js/core/domElements.js"></script>
    <script src="js/core/appState.js"></script>
    <script src="js/core/ui.js"></script>
    <script src="js/core/eventHandlers.js"></script>

    <!-- Utils -->
    <script src="js/utils/fileHandler.js"></script>
    <script src="js/utils/fileValidator.js"></script>
    <script src="js/utils/fileReader.js"></script>
    <script src="js/utils/fileConverter.js"></script>

    <!-- Components -->
    <script src="js/components/fileAttachment/fileAttachmentUI.js"></script>
    <!-- <script src="js/components/fileAttachment/attachmentViewer.js"></script> -->

    <script src="js/core/api.js"></script>
    <script src="js/core/openaiApi.js"></script>
    <script src="js/core/geminiApi.js"></script>
    <script src="js/core/claudeApi.js"></script>
    <script src="js/core/responsesApi.js"></script>

    <!-- „ÉÑ„Éº„É´Ê©üËÉΩÈñ¢ÈÄ£„ÅÆ„Éï„Ç°„Ç§„É´ -->
    <script src="js/core/tools/toolRegistry.js"></script>
    <script src="js/core/tools/toolSchemaConverter.js"></script>
    <script src="js/core/tools/toolExecutor.js"></script>
    <script src="js/core/tools/executors/ToolExecutorBase.js"></script>
    <script src="js/core/tools/executors/PowerPointGenerator.js"></script>
    <script src="js/core/tools/executors/ExcelProcessor.js"></script>
    <script src="js/core/tools/executors/CanvasRenderer.js"></script>
    <script src="js/core/tools/toolManager.js"></script>
    <script src="js/components/toolUI/toolProgress.js"></script>
    <script src="js/components/toolUI/fileDownloader.js"></script>
    <script src="js/components/toolUI/toolPreview.js"></script>

    <!-- RAGÈñ¢ÈÄ£„ÅÆ„Éï„Ç°„Ç§„É´ -->
    <script src="js/core/rag/vectorStore.js"></script>
    <script src="js/core/rag/embeddingApi.js"></script>
    <script src="js/core/rag/documentChunker.js"></script>
    <script src="js/core/rag/similaritySearch.js"></script>
    <script src="js/core/rag/confluenceDataSource.js"></script>
    <script src="js/core/rag/confluencePageTree.js"></script>
    <script src="js/core/rag/ragManager.js"></script>

    <script src="js/utils/markdown.js"></script>
    <script src="js/core/userprompts/promptManager.js"></script>
    <script src="js/core/userprompts/promptSuggestions.js"></script>
    
    <!-- „Ç¢„Éº„ÉÜ„Ç£„Éï„Ç°„ÇØ„ÉàÈñ¢ÈÄ£„ÅÆ„Éï„Ç°„Ç§„É´ -->
    <script src="js/components/artifact/artifactDetector.js"></script>
    <script src="js/components/artifact/artifactManager.js"></script>
    <script src="js/components/artifact/artifactRenderer.js"></script>
    <script src="js/components/artifact/artifactPanel.js"></script>

    <!-- „Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÈñ¢ÈÄ£„ÅÆ„Éï„Ç°„Ç§„É´ -->
    <script src="js/components/chat/chatUI.js"></script>
    <script src="js/components/chat/chatRenderer.js"></script>
    <script src="js/components/chat/chatHistory.js"></script>
    <script src="js/components/chat/chatActions.js"></script>
    <script src="js/components/chat/chatAttachmentViewer.js"></script>
    <script src="js/components/fileAttachment/fileAttachment.js"></script>
    <script src="js/components/sidebar/sidebar.js"></script>
    
    <!-- „É¢„Éº„ÉÄ„É´Èñ¢ÈÄ£„ÅÆ„Éï„Ç°„Ç§„É´ -->
    <script src="js/modals/modalHandlers.js"></script>
    <script src="js/modals/apiSettings/apiSettingsModal.js"></script>
    <script src="js/modals/renameChat/renameChatModal.js"></script>
    <script src="js/modals/systemPrompt/systemPromptModal.js"></script>
    <script src="js/modals/promptManager/promptManagerModal.js"></script>
    <script src="js/modals/knowledgeBase/knowledgeBaseModal.js"></script>
    
    <!-- Monaco Editor „Ç≥„É≥„Éà„É≠„Éº„É©„Éº -->
    <script src="js/core/monaco/MonacoEditorController.js"></script>
    
    <!-- „É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£Èñ¢ÈÄ£„ÅÆ„Éï„Ç°„Ç§„É´ -->
    <script src="js/utils/webContentExtractor.js"></script>
    
    <!-- „É°„Ç§„É≥„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éï„Ç°„Ç§„É´ -->
    <script src="main.js"></script>
</body>
</html>